<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:h="http://java.sun.com/jsf/html"
 xmlns:f="http://java.sun.com/jsf/core"
 xmlns:ui="http://java.sun.com/jsf/facelets"
 xmlns:rich="http://richfaces.org/rich"
 xmlns:a4j="http://richfaces.org/a4j"
 xmlns:c="http://java.sun.com/jsp/jstl/core">
<ui:composition>
  <h:form>
 <rich:popupPanel id="createAuthor" autosized="true" style="width:500px; height:100px" domElementAttachment="parent" header="Create new author"  >
 
 <f:facet name="controls">
  <h:outputLink value="#" onclick="#{rich:component('createAuthor')}.hide(); return false;">X</h:outputLink>
 </f:facet>
 <rich:panel id="inputPanel">
  <h:panelGrid columns="3" >
 <h:outputLabel for="firstNameInput" value="First name: " />
 <h:inputText id="firstNameInput" value="#{manageAuthorsAction.author.firstName}" required="true" requiredMessage="Author first name is required!" >
      <f:validateLength minimum="2" maximum="80" />
      <f:validateRegex pattern="([A-Z][a-z]*)([\\s\\\'-][A-Z][a-z]*)*"></f:validateRegex>
    </h:inputText>
    <rich:message for="firstNameInput" ajaxRendered="true"  showSummary="true" showDetail="false" />
    <h:outputLabel for="secondNameInput" value="Second name: " />
 <h:inputText id="secondNameInput" value="#{manageAuthorsAction.author.secondName}" required="true" requiredMessage="Author second name is required!" >
      <f:validateLength minimum="2" maximum="80" />
      <f:validateRegex pattern="([A-Z][a-z]*)([\\s\\\'-][A-Z][a-z]*)*"></f:validateRegex>
    </h:inputText>
    <rich:message for="secondNameInput" ajaxRendered="true"  showSummary="true" showDetail="false" />
    </h:panelGrid>
    </rich:panel>
    <rich:panel style="position:absolute; bottom:0; left:70px; border:0;">
    <a4j:commandButton styleClass="smallBtm" value="Add author" action="#{manageAuthorsAction.addAuthor()}" 
    oncomplete="if (!#{facesContext.validationFailed}) #{rich:component('createAuthor')}.hide();" execute="@form" render="manageAuthorsDataTable, inputPanel" />
        
    <a4j:commandButton styleClass="smallBtm" value="Add and edit" action="#{manageAuthorsAction.addAndEditAuthor()}" 
    oncomplete="if (!#{facesContext.validationFailed}) #{rich:component('createAuthor')}.hide();" execute="@form" render="manageAuthorsDataTable, inputPanel" />
    
    <a4j:commandButton styleClass="smallBtm" value="Clear" action="#{manageAuthorsAction.reset}" execute="@this" render="inputPanel" />

    <a4j:commandButton styleClass="smallBtm" value="Cancel"  onclick="#{rich:component('createAuthor')}.hide(); return false;" />
 </rich:panel>
</rich:popupPanel>
</h:form> 

</ui:composition>
</html>