<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">
<ui:composition>

  <h:form>
 <rich:popupPanel id="createBook"  autosized="true" style="width:500px; height:150px" domElementAttachment="parent" header="Create new book" >
 
	<f:facet name="controls">
	 <h:outputLink value="#" onclick="#{rich:component('createBook')}.hide(); return false;">X</h:outputLink>
	</f:facet>
	
   <ui:include src="inserts/inputsBookCreate.xhtml" >
   <ui:param name="bean" value="#{createBookAction}" />
   </ui:include>
    
    <a4j:commandButton value="Add book" action="#{createBookAction.submit()}" 
				oncomplete="if (!#{facesContext.validationFailed}) #{rich:component('createBook')}.hide();" execute="createBook" render="manageBookDataTable" />
    				
    <a4j:commandButton   value="Add and edit"  action="#{createBookAction.submitAndEdit()}" render="confirmAdd" execute="createBook" 
    			oncomplete="if (!#{facesContext.validationFailed}) {#{rich:component('createBook')}.hide(); #{rich:component('confirmAdd')}.show();}">
    </a4j:commandButton>
    
    <a4j:commandButton value="Clear" action="#{createBookAction.reset}" execute="@this" render="inputPanel" />

    <a4j:commandButton value="Cancel"  onclick="#{rich:component('createBook')}.hide(); return false;" />

</rich:popupPanel>
</h:form> 


   




<rich:popupPanel id="confirmAdd" autosized="true"  style="width:300px; height:50px">
<h:outputText value="Book has been created" />
 <br/>
 <center>

<a4j:commandLink actionListener="#{editBookAction.loadBookForEdit}"
oncomplete="#{rich:component('confirmAdd')}.hide(); #{rich:component('editBookPopUp')}.show()" render="editBookPopUp" execute="@this" >
		<h:graphicImage value="/resources/images/Edit.gif" alt="edit" />
		<f:attribute name="bookId" value="#{createBookAction.idBookAfterCreate}" />
		</a4j:commandLink>


</center>
</rich:popupPanel>

</ui:composition>
</html>