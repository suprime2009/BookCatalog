<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	 xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title>Create Book</title>
    </h:head>
<h:body>




<h:form id="createBookForm" >
<rich:panel>
<f:facet name="header">
<h:outputLabel value="Create new book" />
</f:facet>
   
   <ui:include src="inserts/inputsBookCreate.xhtml" >
   <ui:param name="bean" value="#{createBookAction}" />
   </ui:include>
    

	
	<h:commandButton   value="addBook"  >
    <a4j:ajax execute="createBook" listener="#{createBookAction.submit()}" 
    		oncomplete="if (!#{facesContext.validationFailed}) #{rich:component('createBook')}.hide();" render="formManageBooks"></a4j:ajax>
    </h:commandButton>
    
    <h:commandButton   value="Add/Edit" action="#{createBookAction.submitAndEdit()}" >
    <f:param name="id"  value="#{createBookAction.bookAfterCreate.idBook}"></f:param>
    </h:commandButton>
    
    <h:commandButton type="reset"  value="Clear" >
        <f:ajax  execute="@this" listener="#{createBookAction.reset}" render="createBookForm" ></f:ajax>
    </h:commandButton>
    
    <h:commandButton type="button" value="Cancel" >
        <f:ajax  event="click" onevent="#{rich:component('createBook')}.hide()"></f:ajax>
    </h:commandButton>

    </rich:panel>

</h:form>   




<rich:popupPanel id="confirmAdd" autosized="true"  style="width:300px; height:50px">
<h:outputText value="Book has been created" />
 <br/>
 <center>
<a4j:commandButton value="OK" 
	oncomplete="#{createBookAction.reset()}; #{rich:component('confirmAdd')}.hide();"/>
</center>
</rich:popupPanel>
</h:body>
</html>