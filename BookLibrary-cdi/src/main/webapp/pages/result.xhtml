<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">
    <h:head>
        <title>List of CDs</title>
    </h:head>
    <h:body>
        <h:form id="form" prependId="false">
 <!--The sortable datatable-->
		<rich:dataTable  keepSaved="true" id="booksTable1" value="#{manageBookBean.books}" var="book" rows="#{manageBookBean.rowsPerPage}" style="width:80%">
		
         <ui:param name="columnName" value="bookName" />
         <rich:column sortBy="#{columnName}" sortOrder="#{manageBookBean.sortOrders[columnName]}" sortType="custom">
 
        <f:facet name="header">
            <h:outputLabel value="Sorting:" />
            <h:commandLink >
                #{manageBookBean.sortOrders[columnName]}
                <f:ajax event="click" listener="#{manageBookBean.toggleSort(columnName)}" execute="@form" render="@form"></f:ajax>
            </h:commandLink>
        </f:facet>
		<h:link value="#{book.bookName}" outcome="bookDetails">
			<f:param name="id" value="#{book.idbook}"></f:param>
		</h:link>
    </rich:column>
    
   <ui:include src="regularColumn.xhtml">
		<ui:param name="bean" value="#{manageBookBean}" />
		<ui:param name="columnName" value="#{'publisher'}" />
		<ui:param name="property" value="#{book.publisher}" />
   </ui:include>
   
   <ui:include src="regularColumn.xhtml">
		<ui:param name="bean" value="#{manageBookBean}" />
		<ui:param name="columnName" value="#{'isbn'}" />
		<ui:param name="property" value="#{book.isbn}" />
   </ui:include>
   
   <ui:include src="regularColumn.xhtml">
		<ui:param name="bean" value="#{manageBookBean}" />
		<ui:param name="columnName" value="#{'yearPublished'}" />
		<ui:param name="property" value="#{book.yearPublished}" />
   </ui:include>
   
      <ui:include src="regularColumn.xhtml">
		<ui:param name="bean" value="#{manageBookBean}" />
		<ui:param name="columnName" value="#{'rating'}" />
		<ui:param name="property" value="#{book.rating}" />
   </ui:include>
    
    <f:facet name="footer">
 <ui:include src="scrollPage.xhtml">
                <ui:param name="bean" value="#{manageBookBean}" />
            </ui:include>
           	</f:facet>	 
            </rich:dataTable>
 			
        </h:form>
    </h:body>
</html>